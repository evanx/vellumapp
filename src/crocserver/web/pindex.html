<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Croc</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">

        <link href="./bootstrap/css/bootstrap.css" rel="stylesheet">
        <style type="text/css">
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
            .sidebar-nav {
                padding: 9px 0;
            }
        </style>        
        <script type="text/javascript">
            if (window.location.protocol != "https:") {
                var host = location.host;
                var index = location.host.indexOf(':');
                if (index > 0) {
                    host = location.host.substring(0, index) + ':8443';
                }
                window.location = "https://" + host + location.pathname + location.search + location.hash;
                console.log(window.location);
            }
        </script>
        <link href="./bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
          <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <!-- Fav and touch icons -->
        <link rel="shortcut icon" href="./bootstrap/ico/favicon.ico">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./bootstrap/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./bootstrap/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./bootstrap/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="./bootstrap/ico/apple-touch-icon-57-precomposed.png">
    </head>

    <body>

        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <ul class="nav">
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown">Croc <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li class="croc-nav-anchor"><a href="#" class="croc-home-clickable" href="#">Home</a></li>
                                <li class="croc-nav-anchor"><a href="#" class="croc-about-clickable">About</a></li>
                                <li class="croc-nav-anchor"><a href="#" class="croc-contact-clickable">Contact</a></li>
                            </ul>
                        <li class="dropdown croc-loggedin-viewable hide">
                        </li>
                        <li class="croc-nav-anchor croc-info-landing-extra"><a href="#" class="croc-home-clickable">Home</a></li>
                        <li class="croc-nav-anchor croc-info-landing-extra"><a href="#" class="croc-about-clickable">About</a></li>
                        <li class="croc-nav-anchor croc-info-landing-extra"><a href="#" class="croc-contact-clickable">Contact</a></li>
                        <li class="dropdown croc-loggedin-viewable hide">
                            <a class="dropdown-toggle" data-toggle="dropdown">Account <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li><a class="croc-logout-clickable">Logout</a></li>
                                <li><a href="#">Settings</a></li>
                                <li class="nav-header">Security</li>
                                <li><a id="croc-account-genKey" href="#">Generate key</a></li>
                                <li><a id="croc-account-signCert" href="#">Sign cert</a></li>
                                <li><a id="croc-account-resetOtp" href="#">Reset OTP secret</a></li>
                            </ul>
                        </li>
                    </ul>
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="nav-collapse pull-right collapse">
                        <div id="croc-login-div" class="navbar-text croc-login-viewable hide">
                            <a class="croc-login-clickable" href="#"><img src="img/persona-login.png"/></a>
                        </div>
                        <div class="navbar-text croc-loggedin-viewable hide" id="croc-loggedin-div">
                            <a id="croc-username-text" class="navbar-link croc-logout-clickable" href="#">{username}</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span12">
                    <div class="hero-unit croc-info croc-info-landing-viewable" id="croc-info-landing">
                        <h1>Croc</h1>
                        <p>
                        <p>Croc is the "cron output collector"</p>                        
                        <p>
                            <a id="croc-learn-btn" class="btn btn-primary btn-large croc-login-clickable hide">Login &raquo;</a>
                            <a id="croc-learn-btn" class="btn btn-primary btn-large croc-about-clickable">Learn more &raquo;</a>
                        </p>
                    </div>
                    <div class="hero-unit croc-info hide" id="croc-info-contact">
                        <h1>Contact</h1>
                        <p>
                        <p>evan.summers at gmail.com</p>
                        <p><a id="croc-home-btn" class="btn btn-primary btn-large croc-home-clickable">Home &raquo;</a></p>
                    </div>
                    <div class="hero-unit croc-info hide" id="croc-info-about">
                        <h1>About Croc</h1>
                        <p>
                        <p>Croc is the "cron output collector"</p>
                        <p>Developed by evan.summers at gmail.com, sysadmin at <a href="https://bizswitch.net">BizSwitch.net</a></p>
                        <p><a id="croc-home-btn" class="btn btn-primary btn-large croc-home-clickable">Home &raquo;</a></p>
                    </div>
                    <div class="hero-unit croc-info hide" id="croc-loggedin">
                        <h1 id="croc-loggedin-title"></h1>
                        <!--form method="post" action="/sign" id="croc-loggedin-csr-form">
                                <fieldset>
                                    <textarea rows="2" cols="90" style="width: 100%" id="croc-loggedin-csr-textarea" name="csr" placeholder="Paste your Certificate Signing Request into this box."></textarea>
                                    <button type="submit" class="btn">Submit CSR</button>
                                </fieldset>
                        </form-->
                        <form method="post" action="/genKey" id="croc-loggedin-genkey-form">
                            <form>
                                <fieldset>
                                    <input id="croc-loggedin-genkey-password-input" name="password" placeholder="Enter a key password"/>
                                    <button type="submit" class="btn">Generate P12 key</button>
                                </fieldset>
                            </form>
                        </form>                        
                        <p>Your OTP secret is <tt><span id="croc-totp-text"/></tt>. (You can enter this into your T-OTP client.)</p>
                        <p>Alternatively, scan this QR code into your Google Authenticator app.</p>
                        <p id="croc-loggedin-qr-container">
                            <img id="croc-loggedin-qr-img"/>
                        </p>
                        <p>(This QR code contains the URL <tt><span id="croc-totp-url"/></tt>.)</p>
                        <p><a href="${secureUrl}" class="btn btn-primary btn-large croc-about-clickable">Enter secure site &raquo;</a></p>
                    </div>
                    <div id="croc-resetotp-modal" class="modal hide fade">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3>Reset OTP</h3>
                        </div>
                        <div class="modal-body">
                            <p>Are you sure you wish to reset your OTP (one-time-password) secret?</p>
                        </div>
                        <div class="modal-footer">
                            <a href="#" class="btn" onclick="cancelResetOtp()">Cancel</a>
                            <a href="#" class="btn btn-primary" onclick="okResetOtp()">Ok</a>
                        </div>
                    </div>                    
                    <div id="croc-genkey-modal" class="modal hide fade">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h3>Generate key</h3>
                        </div>
                        <div class="modal-body">
                            <p>Are you sure you wish to generate a new key (and browser cert) for SSL?</p>
                        </div>
                        <div class="modal-footer">
                            <a href="#" class="btn" onclick="cancelGenKey()">Cancel</a>
                            <a href="#" class="btn btn-primary" onclick="okGenKey()">Ok</a>
                        </div>
                    </div>                    
                </div><!--/span-->
            </div><!--/row-->

            <hr>
            <footer>
                <!--p>Built using Bootstrap in November 2012</p-->
            </footer>

        </div><!--/.fluid-container-->

    </body>

    <script src="./bootstrap/js/jquery.js"></script>
    <script src="https://login.persona.org/include.js"></script>    
    <script src="local.js"/>
    <script src="pindex.js"/>
    <script src="./bootstrap/js/bootstrap-transition.js"></script>
    <script src="./bootstrap/js/bootstrap-alert.js"></script>
    <script src="./bootstrap/js/bootstrap-modal.js"></script>
    <script src="./bootstrap/js/bootstrap-dropdown.js"></script>
    <script src="./bootstrap/js/bootstrap-scrollspy.js"></script>
    <script src="./bootstrap/js/bootstrap-tab.js"></script>
    <script src="./bootstrap/js/bootstrap-tooltip.js"></script>
    <script src="./bootstrap/js/bootstrap-popover.js"></script>
    <script src="./bootstrap/js/bootstrap-button.js"></script>
    <script src="./bootstrap/js/bootstrap-collapse.js"></script>
    <script src="./bootstrap/js/bootstrap-carousel.js"></script>
    <script src="./bootstrap/js/bootstrap-typeahead.js"></script>
    
    <script type="text/javascript">
        $(document).ready(function() {    
            console.log("ready");
            initDocument();
        });
    </script>

</html>
